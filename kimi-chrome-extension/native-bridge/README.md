# Kimi Code CLI æ¡¥æ¥æœåŠ¡å™¨

ç”±äº Kimi Code çš„ API ä¸å¯¹å¤–å¼€æ”¾ï¼Œè¿™ä¸ªæ¡¥æ¥æœåŠ¡å™¨å…è®¸ Chrome æ‰©å±•é€šè¿‡æœ¬åœ° HTTP æ¥å£è°ƒç”¨ Kimi CLIã€‚

## ğŸ“‹ å‰ææ¡ä»¶

1. å·²å®‰è£… Python 3.7+
2. å·²å®‰è£… Kimi CLI: `pip install kimi-cli`
3. å·²ç™»å½• Kimi: `kimi login`

## ğŸš€ å®‰è£…æ­¥éª¤

### 1. å®‰è£…ä¾èµ–

```bash
pip install flask flask-cors
```

### 2. å¯åŠ¨æ¡¥æ¥æœåŠ¡å™¨

```bash
python kimi_server.py
```

æˆ–è€…æŒ‡å®šè‡ªå®šä¹‰ç«¯å£ï¼š

```bash
python kimi_server.py --port 8766
```

æœåŠ¡å™¨å¯åŠ¨åä¼šæ˜¾ç¤ºï¼š
```
============================================================
Kimi CLI HTTP æ¡¥æ¥æœåŠ¡å™¨
============================================================
æœåŠ¡å™¨åœ°å€: http://127.0.0.1:8765
å¥åº·æ£€æŸ¥: http://127.0.0.1:8765/health
API ç«¯ç‚¹: http://127.0.0.1:8765/v1/chat/completions
============================================================
```

### 3. é…ç½® Chrome æ‰©å±•

1. ç‚¹å‡» Kimi æ’ä»¶å›¾æ ‡
2. åœ¨ "API ç±»å‹" ä¸­é€‰æ‹© "Kimi Code (æœ¬åœ° CLI)"
3. ç‚¹å‡» "ä¿å­˜è®¾ç½®"

## ğŸ”§ å·¥ä½œåŸç†

```
Chrome æ‰©å±• â†’ HTTP è¯·æ±‚ â†’ kimi_server.py â†’ æœ¬åœ° Kimi CLI â†’ Kimi Code API
```

1. Chrome æ‰©å±•å‘é€ HTTP è¯·æ±‚åˆ°æœ¬åœ°æœåŠ¡å™¨
2. æœåŠ¡å™¨è°ƒç”¨æœ¬åœ°çš„ `kimi` å‘½ä»¤
3. Kimi CLI å¤„ç†è¯·æ±‚å¹¶è¿”å›ç»“æœ
4. æœåŠ¡å™¨å°†ç»“æœè¿”å›ç»™ Chrome æ‰©å±•

## ğŸ“¡ API æ¥å£

### å¥åº·æ£€æŸ¥

```
GET http://127.0.0.1:8765/health
```

å“åº”ï¼š
```json
{
  "status": "ok",
  "service": "kimi-cli-bridge"
}
```

### èŠå¤©å®Œæˆ

```
POST http://127.0.0.1:8765/v1/chat/completions
```

è¯·æ±‚ä½“ï¼š
```json
{
  "messages": [
    {"role": "system", "content": "ç³»ç»Ÿæç¤º"},
    {"role": "user", "content": "ç”¨æˆ·æ¶ˆæ¯"}
  ]
}
```

å“åº”ï¼ˆOpenAI å…¼å®¹æ ¼å¼ï¼‰ï¼š
```json
{
  "choices": [{
    "message": {
      "role": "assistant",
      "content": "åŠ©æ‰‹å›å¤"
    },
    "finish_reason": "stop"
  }],
  "model": "kimi-for-coding"
}
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ä¿æŒæœåŠ¡å™¨è¿è¡Œ**: ä½¿ç”¨ Kimi Code (æœ¬åœ° CLI) æ¨¡å¼æ—¶ï¼Œéœ€è¦ä¿æŒ `kimi_server.py` è¿è¡Œ
2. **å®‰å…¨æ€§**: æœåŠ¡å™¨åªç›‘å¬æœ¬åœ°åœ°å€ (127.0.0.1)ï¼Œä¸ä¼šæš´éœ²åˆ°å…¬ç½‘
3. **æ€§èƒ½**: ç”±äºéœ€è¦è°ƒç”¨å¤–éƒ¨è¿›ç¨‹ï¼Œå“åº”é€Ÿåº¦å¯èƒ½æ¯”ç›´æ¥ API è°ƒç”¨ç¨æ…¢
4. **è¶…æ—¶**: å•æ¬¡è¯·æ±‚æœ€å¤šç­‰å¾… 5 åˆ†é’Ÿ

## ğŸ› æ•…éšœæ’é™¤

### æœåŠ¡å™¨æ— æ³•å¯åŠ¨

æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨ï¼š
```bash
lsof -i :8765
```

æ›´æ¢ç«¯å£å¯åŠ¨ï¼š
```bash
python kimi_server.py --port 8766
```

### æç¤º "æ‰¾ä¸åˆ° kimi å‘½ä»¤"

ç¡®ä¿ kimi-cli å·²æ­£ç¡®å®‰è£…ï¼š
```bash
which kimi
kimi --version
```

å¦‚æœæœªå®‰è£…ï¼š
```bash
pip install kimi-cli
```

### æç¤º "æœªç™»å½•"

è¿è¡Œç™»å½•å‘½ä»¤ï¼š
```bash
kimi login
```

### æ‰©å±•æç¤º "æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨"

1. ç¡®è®¤æœåŠ¡å™¨å·²å¯åŠ¨
2. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
3. å°è¯•åˆ·æ–°æ‰©å±•é¡µé¢

## ğŸ”„ æ›¿ä»£æ–¹æ¡ˆ

å¦‚æœæœ¬åœ° CLI æ¨¡å¼ä¸æ–¹ä¾¿ï¼Œå»ºè®®ä½¿ç”¨ **Moonshot API**ï¼š

1. è®¿é—® https://platform.moonshot.cn/
2. æ³¨å†Œå¹¶è·å– API Key
3. åœ¨æ‰©å±•ä¸­é€‰æ‹© "Moonshot Kimi API" æ¨¡å¼

è¿™ç§æ–¹å¼ä¸éœ€è¦ä¿æŒæœ¬åœ°æœåŠ¡å™¨è¿è¡Œï¼Œæ›´åŠ ç¨³å®šæ–¹ä¾¿ã€‚
